#!/bin/bash
OLDDPI=$(cat ~/.xsettingsd | awk '/Xft\/DPI/ {print $2}')

update() {
    sed -i -E "s/Xft\/DPI .*?/Xft\/DPI $1/g" ~/.xsettingsd
    killall -HUP xsettingsd
    xsettingsd & disown
}

if (( OLDDPI == 110592 )); then
    update 122880
    /usr/bin/telegram-desktop & disown
    sleep 0.5
    update "$OLDDPI"
else
    exec /usr/bin/telegram-desktop
fi
